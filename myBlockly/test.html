<html><head><meta charset='utf-8'><script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/ShowText/showtext.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/SetWindow/setwindow.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/MatrixLed/matrixled.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/GameElements/gameelements.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/OpenURL/openurl.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/TaiwanAirQuality/taiwanairquality.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/SpeechRecognition/speechrecognition.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/TextToSpeech/texttospeech.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/DeepLearning/deeplearning.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/ESP8266/esp8266.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/WebUSB/webusb.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/ThingSpeak/thingspeak.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/IFTTT/ifttt.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/LINE/line.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/HTChart/htchart.js'></script><script src='https://d3js.org/d3.v4.min.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/WebUSB/demos/serial.js'></script><script src='https://fustyles.github.io/webduino/myBlockly/WebUSB/demos/arduino/arduino.js'></script></head><body><div id='showText' style='position:absolute;z-index:9999;'></div><button id='connect'>Connect to Arduino(WebUSB)</button><span id='status' style='color:red'>Connect to your device.</span><input type='text' name='command' id='command' style='display:none'><button id='send' style='display:none'>Send Command</button><span id='response' style='display:none'></span><script>const delay=(seconds)=>{return new Promise((resolve)=>{setTimeout(resolve,seconds*1000);});};const main=async()=>{while ((document.getElementById('connect').innerHTML).indexOf('Disconnect')==-1) {await delay(0.1);}document.getElementById('connect').style.display='none';document.getElementById('status').style.display='none';var x, y, Count, i, j;

function mathRandomInt(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}


body_set("overflow","auto");
image_boundary(500,500);
table_create('table',500,490,0,0,1,1,"solid",1,'#ff0000',null,0,true);
image_create('a','https://www.books.com.tw/img/N00/084/66/N000846665_t_02.png',30,30,200,350,0,true);
image_create('b','https://pic1.zhimg.com/80/1f07a3a53308e972c68ee4c000cb72e8_hd.jpg',60,60,250,430,0,true);
x = 10;
y = 14;
Count = 0;
for (i = 0; i <= 3; i++) {
  for (j = 0; j <= 2; j++) {
    image_create((String(i) + String(j)),'https://2.bp.blogspot.com/-NKnRvyhrJOQ/WhUp-SVkEmI/AAAAAAAAAW8/2RSgKE0W7Xg6A4pC4Ev-n6kUAnrG0KTswCLcBGAs/s1600/384Rayquaza-Mega.png',25,25,(60 + 120 * i),(50 + 80 * j),0,true);
  }
}
window.addEventListener("keydown", myKeydown, true);
async function myKeydown(event) {
  if (event.keyCode == 37) {
    image_set('b',"left",(image_get('b',"left")-10));
    if ((image_boundary_collision('b',"left")) == 1) {
      image_set('b',"left",(image_get('b',"left")+10));
    }
  } else if (event.keyCode == 39) {
    image_set('b',"left",(image_get('b',"left")+10));
    if ((image_boundary_collision('b',"right")) == 1) {
      image_set('b',"left",(image_get('b',"left")-10));
    }
  }
};
while (true) {
  image_set('a',"left",(image_get('a',"left")+x));
  image_set('a',"top",(image_get('a',"top")+y));
  if ((image_boundary_collision('a',"up")) == 1) {
    image_set('a',"top",(image_get('a',"top")+(y * -1)));
    y = y * -1;
  }
  if ((image_boundary_collision('a',"down")) == 1) {
    image_delete('a');
    showtext(30, '#ff0000', 'You lose');
  }
  if ((image_boundary_collision('a',"left")) == 1) {
    image_set('a',"left",(image_get('a',"left")+(x * -1)));
    x = x * -1;
  }
  if ((image_boundary_collision('a',"right")) == 1) {
    image_set('a',"left",(image_get('a',"left")+(x * -1)));
    x = x * -1;
  }
  if ((elements_collision("gameimg_",'a',"gameimg_",'b',"any")) == 1) {
    webusb_sendCommand('digitalwrite',13,1,'','','','','','','');
    y = y * -1;
  }
  for (i = 0; i <= 3; i++) {
    for (j = 0; j <= 2; j++) {
      if ((elements_collision("gameimg_",'a',"gameimg_",(String(i) + String(j)),"left")) == 1) {
        webusb_sendCommand('digitalwrite',13,0,'','','','','','','');
        x = x * -1;
        image_delete((String(i) + String(j)));
        Count = (typeof Count == 'number' ? Count : 0) + 1;
      } else if ((elements_collision("gameimg_",'a',"gameimg_",(String(i) + String(j)),"right")) == 1) {
        webusb_sendCommand('digitalwrite',13,0,'','','','','','','');
        x = x * -1;
        image_delete((String(i) + String(j)));
        Count = (typeof Count == 'number' ? Count : 0) + 1;
      }
    }
  }
  for (i = 0; i <= 3; i++) {
    for (j = 0; j <= 2; j++) {
      if ((image_get((String(i) + String(j)),"exist")) == false) {
        if (mathRandomInt(1, 100) == 1) {
          image_create((String(i) + String(j)),'https://2.bp.blogspot.com/-NKnRvyhrJOQ/WhUp-SVkEmI/AAAAAAAAAW8/2RSgKE0W7Xg6A4pC4Ev-n6kUAnrG0KTswCLcBGAs/s1600/384Rayquaza-Mega.png',25,25,(60 + 120 * i),(50 + 80 * j),0,true);
        }
      }
    }
  }
  showtext(30, '#ff0000', Count);
  await delay(0.1);
}
};main();</script></body></html>